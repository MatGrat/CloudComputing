apiVersion: v1
data:
  nginx.conf: "worker_processes 1;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    server {\n        listen 80;\n        server_name localhost;\n\n        location /microservice-order/ {\n            proxy_pass http://localhost:5003;  \n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            if ($request_method = 'GET') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'POST') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'PUT') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'DELETE') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'OPTIONS') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n\n                add_header 'Access-Control-Max-Age' 1728000;\n                add_header 'Content-Type' 'text/plain charset=UTF-8';\n                add_header 'Content-Length' 0;\n\n                return 204;\n            }\n        }\n\n        location /microservice-product/ {\n            proxy_pass http://localhost:5004;  \n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            if ($request_method = 'GET') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'POST') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'PUT') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'DELETE') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'OPTIONS') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n\n                add_header 'Access-Control-Max-Age' 1728000;\n                add_header 'Content-Type' 'text/plain charset=UTF-8';\n                add_header 'Content-Length' 0;\n\n                return 204;\n            }\n        }\n\n        location /microservice-shop-cart/ {\n            proxy_pass http://localhost:5005;  \n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            if ($request_method = 'GET') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'POST') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'PUT') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'DELETE') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'OPTIONS') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n\n                add_header 'Access-Control-Max-Age' 1728000;\n                add_header 'Content-Type' 'text/plain charset=UTF-8';\n                add_header 'Content-Length' 0;\n\n                return 204;\n            }\n        }\n\n        location /microservice-user/ {\n            proxy_pass http://localhost:5006;  \n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            if ($request_method = 'GET') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'POST') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'PUT') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'DELETE') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n            }\n\n            if ($request_method = 'OPTIONS') {\n                add_header 'Access-Control-Allow-Origin' 'http://localhost:3000';\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Origin, Content-Type, Accept, Authorization';\n                add_header 'Access-Control-Allow-Credentials' 'true';\n\n                add_header 'Access-Control-Max-Age' 1728000;\n                add_header 'Content-Type' 'text/plain charset=UTF-8';\n                add_header 'Content-Length' 0;\n\n                return 204;\n            }\n        }\n    }\n}"
kind: ConfigMap
metadata:
  annotations:
    use-subpath: "true"
  labels:
    io.kompose.service: hs-nginx
  name: hs-nginx-cm0
